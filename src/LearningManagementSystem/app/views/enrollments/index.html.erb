<p id="notice"><%= notice %></p>

<h1>Enrollments</h1>

<% if params[:semester] && params[:semester] != 'all' %>
  <span>Showing Current Semester: <%= params[:semester] %> <%= link_to(
            'Clear', 
            controller: 'enrollments'
            ) %></span>
  <br /> <br />
<% end %>


<table>
  <thead>
    <tr>
      <th>Student</th>
      <th>Semester</th>
      <th>Course Name</th>
      <th>GPA</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @enrollments.each do |enrollment| %>
      <tr>
        <td>
          <%= link_to(
            enrollment.student.full_name, 
            controller: 'students',
            action: 'show', 
            id: enrollment.student_id
            ) %>
        </td>
        <td>
          <%= link_to(
            enrollment.semester, 
            controller: 'enrollments',
            semester: enrollment.course.semester
            ) %>
        </td>
        <td>
          <%= link_to(
            enrollment.course.course_name, 
            controller: 'courses',
            action: 'show', 
            id: enrollment.course_id
            ) %>
        </td>
        <td>
          <%= enrollment.enrollment_gpa %>
        </td>
        <% if current_administrator %>
          <td><%= link_to 'Edit', edit_enrollment_path(enrollment) %></td>
        <% end %>
        <td><%= link_to 'Drop', enrollment, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Enrollment', new_enrollment_path %>
